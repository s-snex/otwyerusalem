<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>OTW YERUSALEM</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Courier+New&display=swap" rel="stylesheet">
    <style>
        /* --- THEME UMUM MONOCHROME ABU-ABU & HITAM --- */
        :root {
            --background-color: #1c1c1c; /* Abu-abu Sangat Gelap */
            --text-color: #f0f0f0;       /* Abu-abu Terang */
            --accent-color: #d3d3d3;     /* Abu-abu Cerah */
            --button-color: #2c2c2c;     /* Abu-abu Gelap untuk tombol */
            --button-hover-color: #4c4c4c; /* Abu-abu Lebih Terang saat hover */
            --input-background: #2c2c2c; /* Abu-abu Gelap untuk input */
            --input-border: #d3d3d3;     /* Abu-abu Cerah untuk border */
            --container-background: rgba(28, 28, 28, 0.5); /* Abu-abu Sangat Gelap dengan Opacity */
            --box-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
            --border-radius: 10px;
            --transition-speed: 0.3s;
            --heading-font-size: 1.8em; /* Lebih Besar untuk Judul */
            --container-width: 300px;
        }

        html, body {
            margin: 0;
            padding: 0;
            height: 100%; 
            width: 100%;
            font-family: 'Courier New', monospace;
        }

        body {
            background-color: var(--background-color); /* Warna Abu-abu Sangat Gelap */
            color: var(--text-color);                /* Teks Abu-abu Terang */
            display: flex;             
            flex-direction: column;     /* Secara default, atur kolom (untuk Nav di atas) */
            overflow: hidden;           /* Agar background image fixed rapi */
            position: relative;
        }

        .background {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url('https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWhvNGNsMjY0bndpMzRsZzh0Z3NxdDJpMGtyOTdkM2c0cmZza2FmbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/TmyxoW4ruLLWM/giphy.webp') 
                        no-repeat center center fixed;
            background-size: cover;
            z-index: -1;
            opacity: 0.7; /* Meningkatkan Opacity untuk Nuansa Gelap */
            filter: brightness(0.5); /* Menambah Efek Gelap */
        }

        /* Overlay Gelap */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Overlay Semi-Transparan */
            z-index: 0;
        }

        /* Tombol Navigasi */
        .nav-buttons {
            display: flex;
            gap: 15px;
            padding: 15px;
            background-color: var(--container-background);
            justify-content: flex-start;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 1;
        }

        .nav-buttons button {
            background-color: var(--button-color); 
            border: 2px solid var(--input-border);
            color: var(--text-color);
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            transition: background-color var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        .nav-buttons button:hover {
            background-color: var(--button-hover-color);
            box-shadow: 0 0 10px var(--input-border);
            transform: scale(1.05);
        }

        /* Page-container: default ter-hidden */
        .page-container {
            display: none; 
            flex: 1;         /* Agar page-container memenuhi sisa ruang body */
            padding: 20px;
            gap: 20px;
            flex-wrap: nowrap; /* Tetap sejajar horisontal */
            justify-content: center;
            z-index: 1;
        }

        .visible {
            display: flex;   /* Tampilkan page-container */
        }

        /* --- PAGE 1 STYLING: LAYOUT HORIZONTAL --- */
        #page1 {
            flex-direction: row;
            align-items: flex-start;
            overflow-x: auto; /* Agar bisa di-scroll horizontal jika diperlukan */
        }

        /* Container SIMETRIS / SIGAR / FILTER / MAGICBYTRBB di page1 */
        .container, .poltar-container, .filter-container, .magicbytrbb {
            width: var(--container-width);
            background-color: var(--container-background); 
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        h2 {
            color: var(--input-border); /* Abu-abu Cerah untuk Judul */
            text-shadow: 0 0 5px var(--input-border); 
            margin: 10px 0;
            text-align: center;
            font-size: var(--heading-font-size);
        }

        textarea, select, button, input {
            width: 100%;
            padding: 12px;
            margin: 5px 0;
            border-radius: 5px;
            border: 1px solid var(--input-border); 
            background-color: var(--input-background); 
            color: var(--text-color);            
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
            font-family: 'Courier New', monospace;
        }

        textarea:focus, select:focus, input:focus {
            border-color: var(--input-border);
            box-shadow: 0 0 5px var(--input-border);
            outline: none;
        }

        button {
            background-color: var(--button-color); 
            border: 2px solid var(--input-border);
            color: var(--text-color);
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            transition: background-color var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
            font-family: 'Courier New', monospace;
        }

        button:hover {
            background-color: var(--button-hover-color); /* Abu-abu Lebih Terang */
            box-shadow: 0 0 10px var(--input-border);
            transform: scale(1.05);
        }

        .result-box {
            background-color: var(--input-background); 
            color: var(--text-color);           
            font-family: 'Courier New', monospace;
            min-height: 150px;
            overflow: hidden; /* Menghilangkan scrollbar */
            margin: 10px 0;
            padding: 15px;
            border: 1px solid var(--input-border);
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 0.9em;
            box-shadow: inset 0 0 5px var(--input-border);
        }

        /* Styling untuk Priority Inputs */
        .priority-inputs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .priority-inputs input {
            flex: 1 1 45%; /* Atur agar dua input bisa berdampingan */
            height: 40px;   /* Konsisten tinggi input */
            background-color: var(--input-background);
            border: 1px solid var(--input-border);
            color: var(--text-color);
            font-family: 'Courier New', monospace;
        }

        /* ---- PAGE 2 STYLING: TEMA SAMA MONOCHROME ABU-ABU CERAH & HITAM ---- */
        #page2 {
            flex-direction: column; /* Page2 default kolom, tapi sama warna/theme */
            align-items: center;
        }

        #container1, #container2 {
            background-color: var(--container-background);
            border: 2px solid var(--input-border);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Iframe style */
        #container1 iframe {
            width: 100%;
            height: 250px; /* Atur sesuai kebutuhan */
            border: none; 
            border-radius: 5px;
        }

        /* Hasil pencarian */
        #hasilPengecekan p {
            margin: 5px 0;
        }

        /* Tabel Styling */
        table {
            border-collapse: collapse;
            width: 100%;
            color: var(--text-color);
            font-family: 'Courier New', monospace;
        }

        th, td {
            border: 1px solid var(--input-border);
            padding: 8px;
            text-align: left;
            font-family: 'Courier New', monospace;
        }

        th {
            background-color: var(--button-color);
            text-shadow: 0 0 5px var(--input-border);
        }

        tr:nth-child(even) {
            background-color: rgba(211, 211, 211, 0.1); /* Sedikit Abu-abu pada Baris Genap */
        }
    </style>
</head>
<body>

  <!-- Latar Belakang GIF -->
  <div class="background"></div>
  <div class="overlay"></div> <!-- Overlay Gelap -->

  <!-- Tombol Navigasi Page1 & Page2 -->
  <div class="nav-buttons">
    <button onclick="showPage('page1')">Lets Cook</button>
    <button onclick="showPage('page2')">Screening</button>
  </div>

  <!-- ===================== PAGE 1 ===================== -->
  <div id="page1" class="page-container visible">
    
    <!-- Kontainer PoltarBytrbb -->
    <div class="container">
        <h2>PoltarByTrbb</h2>
        <input type="text" id="inputBox1" placeholder="Masukkan 4 angka" maxlength="4" oninput="updateTotalPoltar()">
        <textarea id="outputBox3" class="result-box" readonly></textarea>
        <div class="total-result" id="totalResultPoltar">Total Kombinasi: 0</div>
        <button onclick="generate()">Generate</button>

        <!-- Tombol BARU: Hapus Ganjil/Genap khusus PoltarBytrbb -->
        <button onclick="hapusGanjilGenapPoltarBytrbb()">Hapus Ganjil / Genap</button>

        <button onclick="hapusSimetrisDanTigaAngka()">Let Him Cook</button>
        <button onclick="copyToClipboard()">Copy</button>
    </div>

    <!-- Kontainer SigarBytrbb -->
    <div class="poltar-container">
        <h2>SigarByTrbb</h2>
        <input type="text" id="numbersSigar" placeholder="Masukkan angka dipisahkan *" oninput="updateTotalSigar()">
        <div id="totalStringSigar" class="info-label">Total Angka: 0</div>
        <select id="parts">
            <option value="1">1 Bagian</option>
            <option value="2">2 Bagian</option>
            <option value="3">3 Bagian</option>
            <option value="4">4 Bagian</option>
            <option value="5">5 Bagian</option>
            <option value="6">6 Bagian</option>
            <option value="7">7 Bagian</option>
            <option value="8">8 Bagian</option>
            <option value="9">9 Bagian</option>
            <option value="10">10 Bagian</option>
            <option value="11">11 Bagian</option>
            <option value="12">12 Bagian</option>
        </select>
        <button onclick="splitAndShuffleNumbers()">Pisah dan Acak</button>

        <!-- Tombol Hapus Ganjil/Genap Khusus SigarBytrbb -->
        <button onclick="hapusGanjilGenapPoltar()">Hapus Ganjil / Genap</button>

        <button onclick="hapusSimetrisDanTigaAngkaPoltar()">Let Him Cook</button>

        <div id="total-string">Total Angka: 0</div>
        <div id="result-container" class="result-container"></div>
    </div>

    <!-- Kontainer MagicBytrbb -->
    <div class="magicbytrbb">
        <h2>MagicByTrbb</h2>
        <input type="text" id="inputAngkaMagic" placeholder="Masukkan deret angka (pisahkan dengan *)"
               oninput="updateTotalMagic()">
        <div id="totalAngkaMagic" class="info-label">Total Angka: 0</div>
        <input type="number" id="jumlahBagianMagic" placeholder="Masukkan jumlah bagian" min="1" max="7" value="1" oninput="generatePriorityInputsMagic()">
        
        <!-- Container untuk Priority Inputs -->
        <div id="priorityInputsMagic" class="priority-inputs">
            <!-- Priority inputs akan dihasilkan secara dinamis di sini -->
        </div>

        <button onclick="bagiDanPrioritasAngka()">Bagi dan Prioritas Angka</button>
        <div id="hasilContainerMagic"></div>
    </div>

    <!-- Kontainer PembalikBytrbb -->
    <div class="filter-container">
        <h2>PembalikByTrbb</h2>
        <input type="text" id="filterNumbersPembalik" placeholder="Masukkan angka yang ingin difilter dipisahkan dengan *" oninput="updateTotalPembalik()">
        <div id="totalAngkaPembalik" class="info-label">Total Angka: 0</div>
        <button onclick="filterNumbers()">Generate</button>
        <textarea id="filterResult" class="result-box" readonly></textarea>
        <div id="filterTotal">Total Angka: 0</div>
        <button onclick="copyFilterResult()">Copy</button>
    </div>
  </div>
  <!-- /page1 -->

  <!-- ===================== PAGE 2 ===================== -->
  <div id="page2" class="page-container">
    
    <!-- Kontainer 1: Widget (iframe) -->
    <div id="container1">
      <h2>Widget</h2>
      <iframe id="widgetIframe"
        src="https://widgets.vegasnet.info/result.php?show_id=1,4bgcolor=444444&bgcolor2=555555&fontcolor=CCCCCC"> 
      </iframe>
    </div>

    <!-- Kontainer 2: Parsing & Pencarian Kode Tetap -->
    <div id="container2">
      <h2>Parsing & Pencarian Kode Tetap</h2>

      <!-- Textarea data input -->
      <textarea id="dataInput2" rows="7" cols="50" placeholder="Masukkan data di sini..."></textarea>
      <br>

      <!-- Tombol untuk proses parsing & pencarian -->
      <button onclick="parseAndSearch2()">Cari Data</button>

      <hr>
      <h2>Hasil:</h2>
      <div id="result2" class="result-box" style="height:auto;"></div>
    </div>

  </div>
  <!-- /page2 -->

  <script>
    /* NAVIGASI ANTAR PAGE */
    function showPage(pageId){
      // Sembunyikan semua page
      const pages = document.querySelectorAll('.page-container');
      pages.forEach(page => {
          page.classList.remove('visible');
          page.style.display = 'none';
      });

      // Tampilkan target page
      const target = document.getElementById(pageId);
      target.classList.add('visible');
      target.style.display = 'flex';
    }

    // ================== PAGE 1 LOGIC ===================
    // PoltarBytrbb
    function generate() {
      const input = document.getElementById('inputBox1').value;
      if (input.length === 4) {
          const baseString = "1234567890";
          let a = baseString.replace(new RegExp(input[0], 'g'), '');
          let b = baseString.replace(new RegExp(input[1], 'g'), '');
          let c = baseString.replace(new RegExp(input[2], 'g'), '');
          let d = baseString.replace(new RegExp(input[3], 'g'), '');
          const aDigits = a.split('');
          const bDigits = b.split('');
          const cDigits = c.split('');
          const dDigits = d.split('');
          const results = [];
          aDigits.forEach(num1 => {
              bDigits.forEach(num2 => {
                  cDigits.forEach(num3 => {
                      dDigits.forEach(num4 => {
                          results.push(num1 + num2 + num3 + num4);
                      });
                  });
              });
          });
          document.getElementById('outputBox3').textContent = results.join('*');
          document.getElementById('totalResultPoltar').textContent = `Total Kombinasi: ${results.length}`;
      } else {
          alert("Masukkan 4 angka!");
      }
    }

    function hapusSimetrisDanTigaAngka() {
      const angkaArray = document.getElementById('outputBox3').textContent.split('*');
      const hasil = angkaArray.filter(num => {
          if(num.length !== 4) return false;
          const pasanganSimetris = (num[0] === num[1] && num[2] === num[3]);
          const palindromik = (num[0] === num[3] && num[1] === num[2]);
          const berkesinambungan = (num.slice(0, 2) === num.slice(2, 4)) ||
                                   (num[0] === num[2] && num[1] === num[3]);
          const ascending = '123456789';
          const descending = '987654321';
          const angkaBerurutan = ascending.includes(num) || descending.includes(num);

          // cek tiga angka sama berurutan
          for (let i = 0; i < num.length - 2; i++) {
              if (num[i] === num[i+1] && num[i] === num[i+2]) {
                  return false;
              }
          }
          return !(pasanganSimetris || palindromik || berkesinambungan || angkaBerurutan);
      });
      document.getElementById('outputBox3').textContent = hasil.join('*');
      document.getElementById('totalResultPoltar').textContent = `Total Kombinasi: ${hasil.length}`;
    }

    function copyToClipboard(element) {
      if (!element) {
          element = document.getElementById('outputBox3');
      }
      navigator.clipboard.writeText(element.value || element.textContent).then(() => {
          alert('Hasil telah disalin ke clipboard!');
      });
    }

    // SigarBytrbb
    function splitAndShuffleNumbers() {
      const numbers = document.getElementById('numbersSigar').value.trim().split('*').filter(num => num.trim() !== '');
      const parts = parseInt(document.getElementById('parts').value);
      // const suffixBox = document.getElementById('suffixBox');
      // const suffix = suffixBox ? suffixBox.value.trim() : '';

      const shuffledNumbers = shuffleArray(numbers);
      document.getElementById('total-string').textContent = `Total String: ${shuffledNumbers.length}`;

      const chunked = chunkArray(shuffledNumbers, parts);
      const resultContainer = document.getElementById('result-container');
      resultContainer.innerHTML = '';

      chunked.forEach((chunk, index) => {
          const resultBox = document.createElement('div');
          resultBox.classList.add('result-box-container');
          resultBox.style.display = 'flex';
          resultBox.style.flexDirection = 'column';
          resultBox.style.gap = '10px';

          const textArea = document.createElement('textarea');
          textArea.classList.add('result-box');
          textArea.value = chunk.join('*'); // + (suffix ? `*${suffix}` : '');
          textArea.setAttribute('readonly', true);

          const copyButton = document.createElement('button');
          copyButton.classList.add('copy-btn');
          copyButton.textContent = `Copy ${index + 1}`;
          copyButton.onclick = function() {
              copyToClipboard(textArea);
          };

          const totalBox = document.createElement('div');
          totalBox.classList.add('total-box');
          totalBox.textContent = `Total: ${chunk.length}`;

          resultBox.appendChild(textArea);
          resultBox.appendChild(copyButton);
          resultBox.appendChild(totalBox);
          resultContainer.appendChild(resultBox);
      });
    }

    // Fungsi BARU: Hapus kombinasi 4 digit yang semuanya ganjil/genap di kontainer PoltarBytrbb (#outputBox3)
    function hapusGanjilGenapPoltarBytrbb(){
      const outputBox = document.getElementById('outputBox3');
      let splitted = outputBox.textContent.split('*');

      let filtered = splitted.filter(num => {
          if (num.length !== 4) return false;
          let allOdd = true;
          let allEven = true;
          for (let digit of num) {
              let d = parseInt(digit, 10);
              if (d % 2 === 0) {
                  allOdd = false;
              } else {
                  allEven = false;
              }
          }
          // Hapus kalau semua ganjil atau semua genap
          return !(allOdd || allEven);
      });

      outputBox.textContent = filtered.join('*');
      document.getElementById('totalResultPoltar').textContent = `Total Kombinasi: ${filtered.length}`;
      alert("Proses hapus ganjil semua / genap semua selesai (PoltarBytrbb)!");
    }

    // Fungsi BARU: Hapus kombinasi 4 digit yg semuanya ganjil/genap utk area 'SigarBytrbb'
    function hapusGanjilGenapPoltar(){
      const resultContainer = document.getElementById('result-container');
      const textAreas = resultContainer.querySelectorAll('textarea.result-box');
      let overallCount = 0; 

      textAreas.forEach(ta => {
          const splitted = ta.value.split('*');
          const filtered = splitted.filter(num => {
              if (num.length !== 4) return false;

              let allOdd = true;
              let allEven = true;
              for (let digit of num) {
                  const d = parseInt(digit, 10);
                  if (d % 2 === 0) {
                      allOdd = false;
                  } else {
                      allEven = false;
                  }
              }
              return !(allOdd || allEven);
          });

          ta.value = filtered.join('*');
          overallCount += filtered.length;
      });
      document.getElementById('total-string').textContent = `Total String: ${overallCount}`;
      alert("Proses hapus ganjil semua / genap semua selesai!");
    }

    function hapusSimetrisDanTigaAngkaPoltar(){
      const resultContainer = document.getElementById('result-container');
      const textAreas = resultContainer.querySelectorAll('textarea.result-box');
      let overallCount = 0; 

      textAreas.forEach(ta => {
          const splitted = ta.value.split('*');
          const filtered = splitted.filter(num => {
              if(num.length !== 4) return false;

              const pasanganSimetris = (num[0] === num[1] && num[2] === num[3]);
              const palindromik = (num[0] === num[3] && num[1] === num[2]);
              const berkesinambungan = (num.slice(0,2) === num.slice(2,4)) ||
                                       (num[0] === num[2] && num[1] === num[3]);
              const ascending = '123456789';
              const descending = '987654321';
              const angkaBerurutan = ascending.includes(num) || descending.includes(num);

              for (let i = 0; i < num.length - 2; i++) {
                  if (num[i] === num[i+1] && num[i] === num[i+2]) {
                      return false;
                  }
              }
              return !(pasanganSimetris || palindromik || berkesinambungan || angkaBerurutan);
          });
          ta.value = filtered.join('*');
          overallCount += filtered.length;
      });
      document.getElementById('total-string').textContent = `Total String: ${overallCount}`;
      alert("Proses Cook selesai untuk Poltar!");
    }

    // FilterBytrbb
    function filterNumbers() {
      const allNumbers = [];
      for(let i = 0; i < 10000; i++){
          const padded = String(i).padStart(4,'0');
          allNumbers.push(padded);
      }
      const userInput = document.getElementById('filterNumbersPembalik').value.trim();
      if(!userInput){
          alert("Masukkan angka yang ingin difilter, misal: 1234*9874*2190");
          return;
      }
      const excludeList = userInput.split('*');
      const filteredResult = allNumbers.filter(num => !excludeList.includes(num));

      document.getElementById('filterResult').value = filteredResult.join('*');
      document.getElementById('filterTotal').textContent = `Total Angka: ${filteredResult.length}`;
    }

    function copyFilterResult(){
      const filterResult = document.getElementById('filterResult');
      navigator.clipboard.writeText(filterResult.value || filterResult.textContent).then(()=>{
          alert('Hasil filter telah disalin ke clipboard!');
      });
    }

    // Utility
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function chunkArray(array, size) {
      const result = [];
      const chunkSize = Math.floor(array.length / size);
      let remainder = array.length % size;

      for (let i = 0; i < size; i++){
          const start = i * chunkSize;
          const end = start + chunkSize + (remainder > 0 ? 1 : 0);
          result.push(array.slice(start, end));
          remainder--;
      }
      return result;
    }

    // ================== PAGE 2: CODE FIXED CODES ===================
    // Pindahkan parse & search code snippet ke container2
    const fixedCodeString = 
`0000*0001`
    .trim();
    const fixedCodes = fixedCodeString.split("*");

    function parseAndSearch2() {
        const lines = document.getElementById("dataInput2").value.trim().split("\n");
        
        // Regex: ^(.*?)\s+(\d{2}-\d{2}-\d{4})\s+(\d{4})$
        const pattern = /^(.*?)\s+(\d{2}-\d{2}-\d{4})\s+(\d{4})$/;

        const results = [];
        for (const line of lines) {
            const trimmedLine = line.trim();
            const match = trimmedLine.match(pattern);

            if (match) {
                const nameInfo  = match[1].trim();
                const dateInfo  = match[2].trim();
                const codeInfo  = match[3].trim();

                // Cek apakah codeInfo ada di fixedCodes
                if (fixedCodes.includes(codeInfo)) {
                    results.push(`${nameInfo}\t${dateInfo}\t${codeInfo}`);
                }
            }
        }

        if (results.length > 0) {
    // Buat tabel HTML
    const tableRows = results.map(line => {
        const [nameInfo, dateInfo, codeInfo] = line.split('\t');
        return `
          <tr>
            <td style="border:1px solid var(--input-border); padding:8px;">${nameInfo}</td>
            <td style="border:1px solid var(--input-border); padding:8px;">${dateInfo}</td>
            <td style="border:1px solid var(--input-border); padding:8px;">${codeInfo}</td>
          </tr>
        `;
    }).join('');

    const tableHTML = `
      <table>
        <thead>
          <tr>
            <th>Keterangan</th>
            <th>Tanggal</th>
            <th>Kode</th>
          </tr>
        </thead>
        <tbody>
          ${tableRows}
        </tbody>
      </table>
    `;

    document.getElementById("result2").innerHTML = tableHTML;

} else {
    document.getElementById("result2").textContent = 
        "Tidak ada baris yang cocok dengan daftar kode tetap.";
}

    }

    // ================== MAGICBYTRBB LOGIC ===================
    function updateTotalMagic() {
        const input = document.getElementById('inputAngkaMagic').value.trim();
        const total = input === '' ? 0 : input.split('*').filter(num => num.trim() !== '').length;
        document.getElementById('totalAngkaMagic').textContent = `Total Angka: ${total}`;
    }

    function updateTotalSigar() {
        const input = document.getElementById('numbersSigar').value.trim();
        const total = input === '' ? 0 : input.split('*').filter(num => num.trim() !== '').length;
        document.getElementById('totalStringSigar').textContent = `Total Angka: ${total}`;
    }

    function updateTotalPembalik() {
        const input = document.getElementById('filterNumbersPembalik').value.trim();
        const total = input === '' ? 0 : input.split('*').filter(num => num.trim() !== '').length;
        document.getElementById('totalAngkaPembalik').textContent = `Total Angka: ${total}`;
    }

    function generatePriorityInputsMagic(){
        const jumlah = parseInt(document.getElementById('jumlahBagianMagic').value);
        const container = document.getElementById('priorityInputsMagic');
        container.innerHTML = ''; // clear existing inputs

        for(let i=1; i<=jumlah; i++){
            const input = document.createElement('input');
            input.type = 'number';
            input.id = 'prioritasAngkaMagic' + i;
            input.placeholder = 'Prio ' + i;
            input.min = 0; // assuming priority cannot be negative
            container.appendChild(input);
        }
    }

    // Inisialisasi priority inputs saat halaman dimuat
    window.onload = function(){
        generatePriorityInputsMagic();
    }

    function bagiDanPrioritasAngka() {
        const inputString = document.getElementById("inputAngkaMagic").value;
        const angkaArray = inputString.split('*').filter(num => num.trim() !== '');
        const jumlahBagian = parseInt(document.getElementById("jumlahBagianMagic").value);
        const prioritasAngka = [];
        let totalPrioritas = 0;

        for (let i = 1; i <= jumlahBagian; i++) {
            let prioritas = parseInt(document.getElementById("prioritasAngkaMagic" + i).value) || 0;
            prioritasAngka.push(prioritas);
            totalPrioritas += prioritas;
        }

        if (totalPrioritas > angkaArray.length) {
            alert("Total prioritas melebihi jumlah angka yang tersedia. Silakan periksa input Anda.");
            return;
        }

        let hasilBagi = [];

        prioritasAngka.forEach((prioritas, index) => {
            if (prioritas > 0) {
                hasilBagi[index] = angkaArray.splice(0, prioritas);
            } else {
                hasilBagi[index] = [];
            }
        });

        const sisaAngka = angkaArray.length;
        const kelompokTanpaPrioritas = hasilBagi.filter(grup => grup.length === 0).length;
        const sisaPerKelompok = kelompokTanpaPrioritas > 0 ? Math.floor(sisaAngka / kelompokTanpaPrioritas) : 0;

        hasilBagi.forEach((grup, index) => {
            if (grup.length === 0) {
                while (grup.length < sisaPerKelompok && angkaArray.length > 0) {
                    let randomIndex = Math.floor(Math.random() * angkaArray.length);
                    grup.push(angkaArray.splice(randomIndex, 1)[0]);
                }
            }
        });

        while (angkaArray.length > 0) {
            hasilBagi.forEach(grup => {
                if (angkaArray.length > 0) {
                    let randomIndex = Math.floor(Math.random() * angkaArray.length);
                    grup.push(angkaArray.splice(randomIndex, 1)[0]);
                }
            });
        }

        const container = document.getElementById("hasilContainerMagic");
        container.innerHTML = '';
        hasilBagi.forEach((grup, index) => {
            const label = document.createElement("div");
            label.className = 'hasil-label';
            label.style.fontWeight = 'bold';
            label.textContent = `Hasil ${index + 1} (Jumlah Angka: ${grup.length}):`;
            container.appendChild(label);

            const textarea = document.createElement("textarea");
            textarea.classList.add('result-box');
            textarea.value = grup.join('*');
            container.appendChild(textarea);
        });
    }
  </script>
</body>
</html>
